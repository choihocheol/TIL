# 채굴과 노드

### 채굴이란?

채굴은 트랜잭션들을 검증하고, 검증된 트랜잭션들을 블록으로 만드는 블록을 생성하는 행위 이다.

### 이더리움에서 블록싱크 방식은 어떻게 되나요?

1. 새로운 노드가 이더리움에 참여했을때(Go Ethereum 기준 블록싱크)

   - **Full Sync**: 모든 블록의 헤더와 바디를 다운로드한다. 제네시스 블록 부터 모든 블록의 트랜잭션을 재실행하고, 검증하여 모든 블록의 state를 만든다.(일주일 정도 소요됨)
   - **Fast Sync(Default)**: 모든 블록의 헤더와 바디를 다운로드한다. 하지만 트랜잭션을 재실행하지 않고, PoW검증(블록 헤더 검증)을 할 뿐이다. 그리고 다른 노드에게서 최신 state(head-64 번째의 state)를 직접 다운로드 받는다. 동기화 성공 이후엔 full sync mode로 전환된다. 즉, 트랜잭션을 직접 실행하며 state를 만들어간다.

2. 이더리움에 분기가 발생했을때

   - GHOST(Greedy Heaviest Object SubTree) Protocol을 사용한다.

     - **GHOST(Greedy Heaviest Object SubTree) Protocol 이란?**

       - **Bitcoin**: 비트코인에서 분기가 발생했을때 가장 긴 체인을 메인 체인으로 채택하는 프로토콜이다.
       - **Ethereum**: 이더리움은 블록생성 시간이 12초이다. 이 때문에 분기가 더 자주 발생한다. 이때 가장 무거운 체인을 선택한다. 그리고 stale 블록에 대한 채굴 보상도 준다.

### 이더리움에서 이벤트(logs)는 어떻게 발생되며, 클라이언트에서는 어떻게 감지하나요?(이후 수정이 필요한 정확하지 않은 정보)

스마트 컨트랙트의 출력은 ether이다. 근데 event라는 또다른 출력 수단이 존재한다. 스마트 컨트랙트에서 event는 리턴값이 없는 함수이고, 해당 event를 호출하면 logs가 transaction receipt라는 곳에 저장된다.

### 이더리움에서 Receipts정보는 용도가 무엇인가요?

이더리움에서 receipts란 블록의 헤더에 들어가 있는 정보이고, 해당 블록에 존재하는 모든 트랜잭션의 결과를 저장한다.
간단하게는 새로운 컨트랙트의 주소를 찾기 위해 사용된다고 한다.

### 이더리움에서 언제 prunning이 되나요?

이것은 이더리움 state trie의 garbage collection 이라고 할 수 있다. 더이상 사용하지않는 state를 찾아서 없애는 작업을 prunning이라고 한다. 하지만 더이상 사용하지않는 state를 찾는 작업은 매우 높은 cost의 작업이다.

### 각 퍼블릭, 프라이빗, 컨소시움에서 트랜잭션 흐름을 설명해 주세요.(패스)

### genesis.block 은 무엇인가요? 첫번째 블록과 차이점은?

Genesis block은 첫번째 블록이 맞다.

### 하이퍼레저 패브릭에서 리더피어와 앵커피어란 무엇인가요?

- **리더피어(Leader peer)**: OSN(orderer라고도 한다. 트랜잭션들을 검증하고 블록을 생성하는 역할을 한다.)으로 부터 검증된 블록을 수신해서 모든 peer들에게 broadcast 한다.
- **앵커피어(Anchor peer)**: Peer들간 정보를 교환하는 대리인으로 사용되는 peer이다.

### 블록체인에서 이벤트는 어떻게 발생되며, 클라이언트에서는 어떻게 감지하나요?(패스)

### EOS에서 트랜잭션 수수료는?

EOS의 트랜잭션 수수료는 없다.

### EOS에서 리소스 사용량 계산 방식은?(패스)

### 트랜잭션에서 Two Phase Commit 이란 무엇인가요?

[참고](https://dongwooklee96.github.io/post/2021/03/26/two-phase-commit-%EC%9D%B4%EB%9E%80/)

### 소위 응용레벨에서 RPC 방식과 스트리밍 방식의 차이점은 무엇인가요?

- **RPC(Remote Procedule Call)**: 프로세스간 통신(IPC : Inter Process Communication) 방법 중 하나이다. 말그대로 원격지의 프로시저(함수라고 생각해도 된다.)호출하여 사용하는 것이다.
- **스트리밍(Streaming)**: 데이터를 클라이언트에 여러개로 나누어서 전송하는 방식이다.

### 동기, 비동기, 블록, 논블록은 무엇이라고 생각하나요?

[참고](https://deveric.tistory.com/99)

- **동기(Synchronous)**: 서로 다른 두개의 작업A와 B가 있을때 두 작업 모두 동시에 시작하고 동시에 끝나거나, A 작업이 끝나는 시간과 작업B를 시작하는 시간이 같으면 synchronous를 만족한다.
- **비동기(Asynchronous)**: 서로 다른 두개의 작업A와 B가 있을때 두 작업이 각각의 작업이 시작되는 시간, 작업이 끝나는 시간을 가진다면 asynchronous를 만족한다.
- **블록(Block)**: 작업A가 진행 중에 다른 작업인 작업B를 만날때 작업A는 작업B가 모두 끝날때 까지 기다렸다가 작업A를 다시 시작한다면 block을 만족한다.
- **논블록(Non-block)**: 작업A가 진행 중에 다른 작업인 작업B를 만날때 작업A는 작업B에 상관없이 작업A를 계속 진행한다면 non-block을 만족한다.

### 잠금 없는 동시성 프로그래밍이란 무엇인가요?(패스)

### 블록체인 네트워크에서 하나 이상의 블록을 제거할 수 있나요?

PoW에서 GHOST protocol로 인한 블록이 제거되는경우를 제외하면 불가능에 가깝다고 볼 수 있다.

### 오프체인이 무엇인가요?

오프체인(Off-chain)은 메인 블록체인 시스템이 아닌 그 외부에서 트랜잭션이 발생한다. 이를 통해 온체인(on-chain)의 확장성(scalability)문제를 어느정도 해결가능하다.

### 오프체인 트랜잭션은 어떻게 구성되어있나요?(패스)

### 블록체인에 작성된 데이터는 immutable한가요?

블록체인에 작성된 데이터는 immutable하다.

### P2P 네트워크에서 피어 검색은 어떻게 동작하나요?

[참고](http://tutorials.jenkov.com/p2p/finding-peers.html)

### 하드 포크와 소프트 포크는 무엇인가요?

- **하드포크(Hard Fork)**: 하드포크(Hard Fork)는 블록체인의 기본 기능 자체를 수정하여 블록체인의 문제 해결 및 업그레이드를 하는 방식이다. 하드포크(hard fork) 이후엔 완전히 다른 프로토콜을 가지는 블록체인이되므로 완전히 분기하게 된다.
- **소프트포크(Soft Fork)**: 소프트포크(Soft Fork)는 블록체인의 기능을 일부만 수정해서 블록체인이 분기하지않고 기존 블록체인을 그대로 사용할 수 있다.

### 블록은 어떻게 식별하나요?

각 블록은 헤더에 고유한 hash를 가지고 있다. 이것을 통해 블록을 식별할 수 있다.
